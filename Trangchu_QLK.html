<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trang Chủ - Quản Lý Kho</title>
    <!-- Google Fonts: Be Vietnam Pro -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <style>
      :root {
        --sidebar-width: 260px;
        --bs-border-radius: 0.5rem;
        --bs-border-radius-lg: 0.8rem;
        --bs-body-font-family: "Be Vietnam Pro", sans-serif;
        --bs-body-font-size: 0.9rem;
      }

      body {
        background-color: #f7f9fc;
        overflow: hidden;
        font-weight: 400;
      }

      .app-container {
        display: flex;
        height: 100vh;
      }

      .sidebar {
        width: var(--sidebar-width);
        min-width: var(--sidebar-width);
        background-color: #fff;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        transition: margin-left 0.3s ease;
        overflow-y: auto;
      }

      .sidebar .nav-link {
        color: #5a5c69;
        font-size: 0.9rem;
        font-weight: 500;
        padding: 0.85rem 1.5rem;
        white-space: nowrap;
      }

      .sidebar .nav-link.active,
      .sidebar .nav-link:hover {
        color: #0d6efd;
        background-color: #f0f5ff;
      }

      .sidebar .nav-link.active-parent {
        color: #0d6efd;
        background-color: #f0f5ff;
      }

      .sidebar .sub-menu .nav-link.active {
        border-left: 3px solid #0d6efd;
        padding-left: calc(3.5rem - 3px);
        font-weight: 600;
      }

      .sidebar .nav-link .bi {
        margin-right: 0.75rem;
        font-size: 1rem;
        vertical-align: middle;
      }

      .sidebar .nav-link[data-bs-toggle="collapse"] {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .sidebar .nav-link[data-bs-toggle="collapse"] .bi-chevron-down {
        transition: transform 0.2s ease-in-out;
        font-size: 0.8rem;
      }
      .sidebar
        .nav-link[data-bs-toggle="collapse"]:not(.collapsed)
        .bi-chevron-down {
        transform: rotate(-180deg);
      }

      .sub-menu .nav-link {
        padding-left: 3.5rem !important;
        font-size: 0.85rem;
        font-weight: 400;
        color: #6c757d;
      }
      .sub-menu .nav-link .bi {
        font-size: 0.7rem !important;
        margin-right: 1rem;
      }

      .main-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .main-content-header {
        position: sticky;
        top: 0;
        z-index: 1020;
      }

      .main-content > main {
        flex-grow: 1;
        overflow-y: auto;
      }

      .main-content .card-body {
        display: flex;
        flex-direction: column;
      }

      .card {
        border: 1px solid #e3e6f0;
        border-radius: var(--bs-border-radius-lg);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 600;
      }

      .nav-tabs-bordered {
        border-bottom: 1px solid #e3e6f0;
      }
      .nav-tabs-bordered .nav-link {
        margin-bottom: -1px;
        border: none;
        color: #555;
        font-weight: 500;
      }
      .nav-tabs-bordered .nav-link.active {
        color: var(--bs-primary);
        background-color: transparent;
        border-bottom: 2px solid var(--bs-primary);
      }

      @media (max-width: 991.98px) {
        body {
          overflow: auto;
        }
        .app-container {
          flex-direction: column;
          height: auto;
          min-height: 100vh;
        }
        .main-content {
          height: auto;
          overflow: visible;
        }
        .main-content > main {
          overflow-y: visible;
        }
        .sidebar {
          position: fixed;
          top: 0;
          bottom: 0;
          left: calc(-1 * var(--sidebar-width));
          transition: left 0.3s ease;
          z-index: 1045;
          height: 100vh;
          overflow-y: auto;
        }
        .sidebar.show {
          left: 0;
        }
        .sidebar-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.5);
          z-index: 1040;
          display: none;
        }
        .sidebar.show + .sidebar-overlay {
          display: block;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <div class="sidebar p-3" id="sidebarMenu">
        <h1 class="h4 text-primary fw-bold text-center mb-4 mt-2">
          <i class="bi bi-box-seam-fill"></i> Quản Lý Kho
        </h1>
        <ul class="nav flex-column" id="sidebarNav">
          <li class="nav-item">
            <a
              class="nav-link active"
              aria-current="page"
              href="#"
              onclick="showContent('dashboard-content', this)"
            >
              <i class="bi bi-speedometer2"></i>Tổng quan
            </a>
          </li>

          <!-- Danh Mục Group -->
          <li class="nav-item mt-3">
            <a
              class="nav-link collapsed"
              data-bs-toggle="collapse"
              href="#danhMucCollapse"
              role="button"
              aria-expanded="false"
              aria-controls="danhMucCollapse"
            >
              <span><i class="bi bi-journal-album"></i>Danh Mục</span>
              <i class="bi bi-chevron-down"></i>
            </a>
            <div
              class="collapse"
              id="danhMucCollapse"
              data-bs-parent="#sidebarNav"
            >
              <ul class="nav flex-column sub-menu">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('nhom-vat-tu-content', this)"
                    ><i class="bi bi-dot"></i>Nhóm vật tư</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('nhom-san-pham-content', this)"
                    ><i class="bi bi-dot"></i>Nhóm sản phẩm</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('danh-muc-vat-tu-content', this)"
                    ><i class="bi bi-dot"></i>Danh mục Vật tư</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('danh-muc-san-pham-content', this)"
                    ><i class="bi bi-dot"></i>Danh mục Sản phẩm</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('bom-san-pham-content', this)"
                    ><i class="bi bi-dot"></i>BOM Sản phẩm</a
                  >
                </li>
              </ul>
            </div>
          </li>

          <li class="nav-item mt-2">
            <a
              class="nav-link collapsed"
              data-bs-toggle="collapse"
              href="#khoVatTuCollapse"
              role="button"
              aria-expanded="false"
              aria-controls="khoVatTuCollapse"
            >
              <span><i class="bi bi-box-seam"></i>Kho Vật Tư</span>
              <i class="bi bi-chevron-down"></i>
            </a>
            <div
              class="collapse"
              id="khoVatTuCollapse"
              data-bs-parent="#sidebarNav"
            >
              <ul class="nav flex-column sub-menu">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('nhap-kho-vt-content', this)"
                    ><i class="bi bi-dot"></i>Nhập kho</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('xuat-kho-vt-content', this)"
                    ><i class="bi bi-dot"></i>Xuất kho</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link d-flex justify-content-between align-items-center"
                    href="#"
                    onclick="showContent('ton-kho-vt-content', this)"
                  >
                    <span><i class="bi bi-dot"></i>Tồn kho</span>
                    <span class="badge rounded-pill bg-danger">15</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('placeholder-content', this, 'Kiểm kê Vật tư')"
                    ><i class="bi bi-dot"></i>Kiểm kê</a
                  >
                </li>
              </ul>
            </div>
          </li>
          <li class="nav-item mt-2">
            <a
              class="nav-link collapsed"
              data-bs-toggle="collapse"
              href="#sanXuatCollapse"
              role="button"
              aria-expanded="false"
              aria-controls="sanXuatCollapse"
            >
              <span><i class="bi bi-tools"></i>Sản Xuất</span>
              <i class="bi bi-chevron-down"></i>
            </a>
            <div
              class="collapse"
              id="sanXuatCollapse"
              data-bs-parent="#sidebarNav"
            >
              <ul class="nav flex-column sub-menu">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('lenh-san-xuat-content', this)"
                    ><i class="bi bi-dot"></i>Lệnh sản xuất</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('placeholder-content', this, 'Theo dõi tiến độ')"
                    ><i class="bi bi-dot"></i>Theo dõi tiến độ</a
                  >
                </li>
              </ul>
            </div>
          </li>
          <li class="nav-item mt-2">
            <a
              class="nav-link collapsed"
              data-bs-toggle="collapse"
              href="#khoSanPhamCollapse"
              role="button"
              aria-expanded="false"
              aria-controls="khoSanPhamCollapse"
            >
              <span><i class="bi bi-archive-fill"></i>Kho Sản Phẩm</span>
              <i class="bi bi-chevron-down"></i>
            </a>
            <div
              class="collapse"
              id="khoSanPhamCollapse"
              data-bs-parent="#sidebarNav"
            >
              <ul class="nav flex-column sub-menu">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('placeholder-content', this, 'Nhập từ Sản xuất')"
                    ><i class="bi bi-dot"></i>Nhập từ Sản xuất</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('placeholder-content', this, 'Xuất bán')"
                    ><i class="bi bi-dot"></i>Xuất bán</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link d-flex justify-content-between align-items-center"
                    href="#"
                    onclick="showContent('placeholder-content', this, 'Tồn kho Sản phẩm')"
                  >
                    <span><i class="bi bi-dot"></i>Tồn kho</span>
                    <span class="badge rounded-pill bg-warning text-dark"
                      >8</span
                    >
                  </a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#"
                    onclick="showContent('placeholder-content', this, 'Báo cáo')"
                    ><i class="bi bi-dot"></i>Báo cáo</a
                  >
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
      <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

      <!-- Main Content -->
      <div class="main-content">
        <!-- Header -->
        <nav
          class="navbar navbar-expand-lg bg-light shadow-sm main-content-header"
        >
          <div class="container-fluid">
            <button
              class="navbar-toggler"
              type="button"
              onclick="toggleSidebar()"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse">
              <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item dropdown">
                  <a
                    class="nav-link position-relative"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                    title="Thông báo"
                  >
                    <i class="bi bi-bell-fill fs-5"></i>
                    <span
                      class="position-absolute top-50 start-100 translate-middle badge rounded-pill bg-danger border border-light"
                      style="font-size: 0.6em; margin-top: -8px"
                      >3+</span
                    >
                  </a>
                  <ul
                    class="dropdown-menu dropdown-menu-end shadow border-0 mt-2"
                    style="width: 350px"
                  >
                    <li class="dropdown-header">Bạn có 3 thông báo mới</li>
                    <li>
                      <a
                        class="dropdown-item d-flex align-items-start gap-2 py-2"
                        href="#"
                        ><i
                          class="bi bi-exclamation-triangle-fill text-danger fs-4"
                        ></i>
                        <div>
                          <strong class="d-block">Hết hàng: Vít M3x10</strong
                          ><small class="text-body-secondary"
                            >Cần nhập thêm 25 cái</small
                          >
                        </div></a
                      >
                    </li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                      <a
                        class="dropdown-item d-flex align-items-start gap-2 py-2"
                        href="#"
                        ><i
                          class="bi bi-check-circle-fill text-success fs-4"
                        ></i>
                        <div>
                          <strong class="d-block">Nhập kho thành công</strong
                          ><small class="text-body-secondary"
                            >Lô hàng #PNK-00125 đã được ghi nhận.</small
                          >
                        </div></a
                      >
                    </li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                      <a class="dropdown-item text-center" href="#"
                        >Xem tất cả thông báo</a
                      >
                    </li>
                  </ul>
                </li>
                <li class="nav-item py-1">
                  <div class="vr d-none d-lg-block mx-2"></div>
                </li>
                <li class="nav-item dropdown">
                  <a
                    class="nav-link dropdown-toggle d-flex align-items-center"
                    href="#"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="bi bi-person-circle fs-5 me-2"></i>
                    <span class="d-none d-sm-inline">Admin</span>
                  </a>
                  <ul
                    class="dropdown-menu dropdown-menu-end shadow border-0 mt-2"
                  >
                    <li>
                      <a class="dropdown-item" href="#"
                        ><i class="bi bi-person-fill me-2"></i>Thông tin cá
                        nhân</a
                      >
                    </li>
                    <li>
                      <a class="dropdown-item" href="#"
                        ><i class="bi bi-gear-fill me-2"></i>Cài đặt</a
                      >
                    </li>
                    <li><hr class="dropdown-divider" /></li>
                    <li>
                      <a class="dropdown-item text-danger" href="#"
                        ><i class="bi bi-box-arrow-right me-2"></i>Đăng xuất</a
                      >
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>

        <!-- Page Content Area -->
        <main class="p-lg-4 p-3">
          <div id="dashboard-content" class="page-content-section">
            <h2 class="h4 mb-4">Tổng quan Kho</h2>
            <div class="row g-4">
              <div class="col-lg-6">
                <div class="card h-100 shadow-sm">
                  <div class="card-body p-4">
                    <div
                      class="d-flex justify-content-between align-items-center"
                    >
                      <h3 class="h5 card-title mb-0">Kho Vật Tư</h3>
                      <span
                        class="badge bg-primary-subtle text-primary-emphasis rounded-pill px-3 py-2"
                        >Tổng quan</span
                      >
                    </div>
                    <p class="card-subtitle mt-2 text-body-secondary small">
                      Tình hình nhập, xuất và tồn kho nguyên vật liệu.
                    </p>
                    <div class="row g-4 mt-3">
                      <div class="col-sm-6">
                        <div
                          class="card kpi-card bg-primary-subtle text-primary-emphasis p-3 rounded-4"
                        >
                          <p class="mb-1">Tổng loại vật tư</p>
                          <p class="display-4 mb-0">1,250</p>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div
                          class="card kpi-card bg-danger-subtle text-danger-emphasis p-3 rounded-4"
                        >
                          <p class="mb-1">Vật tư sắp hết hàng</p>
                          <p class="display-4 mb-0">15</p>
                        </div>
                      </div>
                    </div>
                    <div class="mt-4 pt-3">
                      <h4 class="fs-6 fw-semibold text-body-secondary">
                        Cảnh báo tồn kho thấp
                      </h4>
                      <ul class="list-group list-group-flush mt-2">
                        <li
                          class="list-group-item d-flex justify-content-between align-items-center px-0"
                        >
                          <span>Vít M3x10</span
                          ><span class="text-danger fw-semibold"
                            >Còn <strong>25</strong> / Tối thiểu 50</span
                          >
                        </li>
                        <li
                          class="list-group-item d-flex justify-content-between align-items-center px-0"
                        >
                          <span>Tụ điện 100uF</span
                          ><span class="text-danger fw-semibold"
                            >Còn <strong>12</strong> / Tối thiểu 20</span
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="card h-100 shadow-sm">
                  <div class="card-body p-4">
                    <div
                      class="d-flex justify-content-between align-items-center"
                    >
                      <h3 class="h5 card-title mb-0">Kho Sản Phẩm</h3>
                      <span
                        class="badge bg-success-subtle text-success-emphasis rounded-pill px-3 py-2"
                        >Thành phẩm</span
                      >
                    </div>
                    <p class="card-subtitle mt-2 text-body-secondary small">
                      Theo dõi thành phẩm từ sản xuất và giao hàng.
                    </p>
                    <div class="row g-4 mt-3">
                      <div class="col-sm-6">
                        <div
                          class="card kpi-card bg-success-subtle text-success-emphasis p-3 rounded-4"
                        >
                          <p class="mb-1">Tổng loại sản phẩm</p>
                          <p class="display-4 mb-0">85</p>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div
                          class="card kpi-card bg-warning-subtle text-warning-emphasis p-3 rounded-4"
                        >
                          <p class="mb-1">Đơn hàng chờ xuất</p>
                          <p class="display-4 mb-0">8</p>
                        </div>
                      </div>
                    </div>
                    <div class="mt-4 pt-3">
                      <h4 class="fs-6 fw-semibold text-body-secondary">
                        Mới hoàn thành từ sản xuất
                      </h4>
                      <ul class="list-group list-group-flush mt-2">
                        <li
                          class="list-group-item d-flex justify-content-between align-items-center px-0"
                        >
                          <div>
                            <p class="mb-0 fw-medium">Sản phẩm Model A</p>
                            <p class="mb-0 text-body-secondary small">
                              LSX-00123
                            </p>
                          </div>
                          <span class="fw-semibold">+ 50 cái</span>
                        </li>
                        <li
                          class="list-group-item d-flex justify-content-between align-items-center px-0"
                        >
                          <div>
                            <p class="mb-0 fw-medium">Sản phẩm Model B</p>
                            <p class="mb-0 text-body-secondary small">
                              LSX-00122
                            </p>
                          </div>
                          <span class="fw-semibold">+ 200 cái</span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="nhom-vat-tu-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4">Quản lý Nhóm vật tư</h2>
            <div class="card shadow-sm h-100">
              <div class="card-body p-4">
                <div
                  class="d-flex flex-wrap gap-2 justify-content-between align-items-center mb-4"
                >
                  <div class="input-group" style="max-width: 400px">
                    <span class="input-group-text bg-light border-end-0"
                      ><i class="bi bi-search"></i></span
                    ><input
                      type="text"
                      id="nhom-vat-tu-search-input"
                      class="form-control border-start-0"
                      placeholder="Tìm kiếm..."
                    />
                  </div>
                  <button class="btn btn-primary d-flex align-items-center">
                    <i class="bi bi-plus-circle me-2"></i>Thêm mới
                  </button>
                </div>
                <div class="table-responsive table-container-scrollable">
                  <table
                    id="nhom-vat-tu-table"
                    class="table table-striped table-hover align-middle"
                  >
                    <thead class="table-light">
                      <tr>
                        <th scope="col">#</th>
                        <th>Mã nhóm</th>
                        <th>Tên nhóm</th>
                        <th>Loại</th>
                        <th>Mô tả</th>
                        <th>Ngày tạo</th>
                        <th>Người tạo</th>
                        <th class="text-center">Hành động</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>1</td>
                        <td>NhomVT001</td>
                        <td>Linh kiện điện tử</td>
                        <td><span class="badge bg-primary">Chính</span></td>
                        <td>Các loại vi mạch...</td>
                        <td>01/08/2025</td>
                        <td>Admin</td>
                        <td class="text-center">
                          <div class="btn-group btn-group-sm">
                            <button
                              class="btn btn-outline-secondary"
                              title="Sửa"
                            >
                              <i class="bi bi-pencil-square"></i></button
                            ><button class="btn btn-outline-danger" title="Xóa">
                              <i class="bi bi-trash-fill"></i>
                            </button>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <nav
                  class="d-flex flex-wrap justify-content-between align-items-center mt-3 pt-3 border-top"
                >
                  <div
                    class="d-flex align-items-center text-body-secondary small"
                  >
                    Hiển thị
                    <select
                      class="form-select form-select-sm mx-2"
                      style="width: auto"
                    >
                      <option selected>10</option>
                    </select>
                    bản ghi.
                  </div>
                  <ul class="pagination mb-0">
                    <li class="page-item disabled">
                      <a class="page-link" href="#"
                        ><i class="bi bi-chevron-left"></i
                      ></a>
                    </li>
                    <li class="page-item active">
                      <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#"
                        ><i class="bi bi-chevron-right"></i
                      ></a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div
            id="nhom-san-pham-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4">Quản lý Nhóm sản phẩm</h2>
            <div class="card shadow-sm h-100">
              <div class="card-body p-4">
                <div
                  class="d-flex flex-wrap gap-2 justify-content-between align-items-center mb-4"
                >
                  <div class="input-group" style="max-width: 400px">
                    <span class="input-group-text bg-light border-end-0"
                      ><i class="bi bi-search"></i></span
                    ><input
                      type="text"
                      id="nhom-san-pham-search-input"
                      class="form-control border-start-0"
                      placeholder="Tìm kiếm..."
                    />
                  </div>
                  <button class="btn btn-primary d-flex align-items-center">
                    <i class="bi bi-plus-circle me-2"></i>Thêm mới
                  </button>
                </div>
                <div class="table-responsive table-container-scrollable">
                  <table
                    id="nhom-san-pham-table"
                    class="table table-striped table-hover align-middle"
                  >
                    <thead class="table-light">
                      <tr>
                        <th>#</th>
                        <th>Mã nhóm</th>
                        <th>Tên nhóm</th>
                        <th>Dòng SP</th>
                        <th>Mô tả</th>
                        <th>Ngày tạo</th>
                        <th>Người tạo</th>
                        <th class="text-center">Hành động</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>1</td>
                        <td>NhomSP001</td>
                        <td>Điện thoại</td>
                        <td><span class="badge bg-danger">Cao cấp</span></td>
                        <td>Các dòng flagship...</td>
                        <td>15/07/2025</td>
                        <td>Admin</td>
                        <td class="text-center">
                          <div class="btn-group btn-group-sm">
                            <button
                              class="btn btn-outline-secondary"
                              title="Sửa"
                            >
                              <i class="bi bi-pencil-square"></i></button
                            ><button class="btn btn-outline-danger" title="Xóa">
                              <i class="bi bi-trash-fill"></i>
                            </button>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <nav
                  class="d-flex flex-wrap justify-content-between align-items-center mt-3 pt-3 border-top"
                >
                  <div
                    class="d-flex align-items-center text-body-secondary small"
                  >
                    Hiển thị
                    <select
                      class="form-select form-select-sm mx-2"
                      style="width: auto"
                    >
                      <option selected>10</option>
                    </select>
                    bản ghi.
                  </div>
                  <ul class="pagination mb-0">
                    <li class="page-item disabled">
                      <a class="page-link" href="#"
                        ><i class="bi bi-chevron-left"></i
                      ></a>
                    </li>
                    <li class="page-item active">
                      <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#"
                        ><i class="bi bi-chevron-right"></i
                      ></a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div
            id="danh-muc-vat-tu-content"
            class="page-content-section"
            style="display: none"
          >
            <div class="row g-4">
              <div id="vat-tu-table-container" class="col-12">
                <h2 class="h4 mb-4">Quản lý Danh mục vật tư</h2>
                <div class="card shadow-sm h-100">
                  <div class="card-body p-4">
                    <div
                      class="d-flex flex-wrap gap-3 justify-content-between align-items-center mb-4"
                    >
                      <div class="input-group" style="max-width: 400px">
                        <span class="input-group-text bg-light border-end-0"
                          ><i class="bi bi-search"></i></span
                        ><input
                          type="text"
                          id="vat-tu-search-input"
                          class="form-control border-start-0"
                          placeholder="Tìm kiếm..."
                        />
                      </div>
                      <div class="btn-toolbar">
                        <div class="btn-group me-2">
                          <button
                            class="btn btn-primary"
                            data-bs-toggle="tooltip"
                            title="Thêm vật tư"
                          >
                            <i class="bi bi-plus-circle"></i>
                          </button>
                        </div>
                        <div class="btn-group">
                          <button
                            id="edit-vat-tu-btn"
                            class="btn btn-outline-secondary"
                            disabled
                            data-bs-toggle="tooltip"
                            title="Sửa"
                          >
                            <i class="bi bi-pencil-square"></i></button
                          ><button
                            id="delete-vat-tu-btn"
                            class="btn btn-outline-danger"
                            disabled
                            data-bs-toggle="tooltip"
                            title="Xóa"
                          >
                            <i class="bi bi-trash-fill"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="table-responsive table-container-scrollable">
                      <table
                        id="vat-tu-table"
                        class="table table-hover align-middle"
                      >
                        <thead class="table-light">
                          <tr>
                            <th>Tên vật tư</th>
                            <th>Vị trí</th>
                            <th>ĐVT</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="table-light">
                            <td colspan="3" class="fw-bold">
                              <i class="bi bi-tags me-2"></i>Linh kiện điện tử
                            </td>
                          </tr>
                          <tr
                            onclick="showVatTuDetail(this)"
                            style="cursor: pointer"
                            data-img-src="https://placehold.co/120x120/EFEFEF/333333?text=IC"
                          >
                            <td>
                              <strong>Vi mạch IC-XYZ</strong>
                              <p class="small text-body-secondary mb-0">
                                VT0001
                              </p>
                            </td>
                            <td>Kệ A1-05</td>
                            <td>Cái</td>
                          </tr>
                          <tr class="table-light">
                            <td colspan="3" class="fw-bold">
                              <i class="bi bi-tags me-2"></i>Vật tư cơ khí
                            </td>
                          </tr>
                          <tr
                            onclick="showVatTuDetail(this)"
                            style="cursor: pointer"
                            data-img-src="https://placehold.co/120x120/EFEFEF/333333?text=VÍT"
                          >
                            <td>
                              <strong>Vít M3x10</strong>
                              <p class="small text-body-secondary mb-0">
                                VT0002
                              </p>
                            </td>
                            <td>Kệ B2-11</td>
                            <td>Cái</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <nav
                      class="d-flex flex-wrap justify-content-between align-items-center mt-3 pt-3 border-top"
                    >
                      <div
                        class="d-flex align-items-center text-body-secondary small"
                      >
                        Hiển thị
                        <select
                          class="form-select form-select-sm mx-2"
                          style="width: auto"
                        >
                          <option selected>10</option>
                        </select>
                        bản ghi.
                      </div>
                      <ul class="pagination mb-0">
                        <li class="page-item disabled">
                          <a class="page-link" href="#"
                            ><i class="bi bi-chevron-left"></i
                          ></a>
                        </li>
                        <li class="page-item active">
                          <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item">
                          <a class="page-link" href="#"
                            ><i class="bi bi-chevron-right"></i
                          ></a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>
              <div id="vat-tu-detail-container" class="col-lg-6 d-none">
                <h2 class="h4 mb-4 invisible">Chi tiết</h2>
                <div class="card shadow-sm sticky-top" style="top: 1.5rem">
                  <div class="card-body p-4 position-relative">
                    <button
                      type="button"
                      class="btn-close position-absolute"
                      style="top: 1rem; right: 1rem"
                      onclick="hideVatTuDetail()"
                    ></button>
                    <div class="text-center mb-3">
                      <img
                        src="https://placehold.co/120x120/EFEFEF/333333?text=IC"
                        class="rounded-circle border"
                        alt="Vi mạch IC-XYZ"
                        id="detail-img"
                        style="width: 100px; height: 100px; object-fit: cover"
                      />
                      <h5 class="mt-3 mb-1" id="detail-ten-vat-tu">
                        Vi mạch IC-XYZ
                      </h5>
                      <p
                        class="text-body-secondary small mb-0"
                        id="detail-ma-vat-tu"
                      >
                        VT0001
                      </p>
                    </div>
                    <hr />
                    <h6>
                      <i class="bi bi-file-earmark-text me-2 text-primary"></i
                      >Mô tả
                    </h6>
                    <p class="text-body-secondary small" id="detail-mo-ta">
                      Vi mạch tích hợp...
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="danh-muc-san-pham-content"
            class="page-content-section"
            style="display: none"
          >
            <div class="row g-4">
              <div id="san-pham-table-container" class="col-12">
                <h2 class="h4 mb-4">Quản lý Danh mục sản phẩm</h2>
                <div class="card shadow-sm h-100">
                  <div class="card-body p-4">
                    <div
                      class="d-flex flex-wrap gap-3 justify-content-between align-items-center mb-4"
                    >
                      <div class="input-group" style="max-width: 400px">
                        <span class="input-group-text bg-light border-end-0"
                          ><i class="bi bi-search"></i></span
                        ><input
                          type="text"
                          id="san-pham-search-input"
                          class="form-control border-start-0"
                          placeholder="Tìm kiếm..."
                        />
                      </div>
                      <div class="btn-toolbar">
                        <div class="btn-group me-2">
                          <button
                            class="btn btn-primary"
                            data-bs-toggle="tooltip"
                            title="Thêm sản phẩm"
                          >
                            <i class="bi bi-plus-circle"></i>
                          </button>
                        </div>
                        <div class="btn-group">
                          <button
                            id="edit-san-pham-btn"
                            class="btn btn-outline-secondary"
                            disabled
                            data-bs-toggle="tooltip"
                            title="Sửa"
                          >
                            <i class="bi bi-pencil-square"></i></button
                          ><button
                            id="delete-san-pham-btn"
                            class="btn btn-outline-danger"
                            disabled
                            data-bs-toggle="tooltip"
                            title="Xóa"
                          >
                            <i class="bi bi-trash-fill"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="table-responsive table-container-scrollable">
                      <table
                        id="san-pham-table"
                        class="table table-hover align-middle"
                      >
                        <thead class="table-light">
                          <tr>
                            <th>Tên sản phẩm</th>
                            <th>Phiên bản</th>
                            <th>ĐVT</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="table-light">
                            <td colspan="3" class="fw-bold">
                              <i class="bi bi-tags me-2"></i>Điện thoại
                            </td>
                          </tr>
                          <tr
                            onclick="showSanPhamDetail(this)"
                            style="cursor: pointer"
                            data-img-src="https://placehold.co/120x120/2d3748/ffffff?text=IP16"
                          >
                            <td>
                              <strong>iPhone 16 Pro</strong>
                              <p class="small text-body-secondary mb-0">
                                SP0001
                              </p>
                            </td>
                            <td>256GB</td>
                            <td>Cái</td>
                          </tr>
                          <tr
                            onclick="showSanPhamDetail(this)"
                            style="cursor: pointer"
                            data-img-src="https://placehold.co/120x120/333333/ffffff?text=S25"
                          >
                            <td>
                              <strong>Galaxy S25 Ultra</strong>
                              <p class="small text-body-secondary mb-0">
                                SP0002
                              </p>
                            </td>
                            <td>512GB</td>
                            <td>Cái</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <nav
                      class="d-flex flex-wrap justify-content-between align-items-center mt-3 pt-3 border-top"
                    >
                      <div
                        class="d-flex align-items-center text-body-secondary small"
                      >
                        Hiển thị
                        <select
                          class="form-select form-select-sm mx-2"
                          style="width: auto"
                        >
                          <option selected>10</option>
                        </select>
                        bản ghi.
                      </div>
                      <ul class="pagination mb-0">
                        <li class="page-item disabled">
                          <a class="page-link" href="#"
                            ><i class="bi bi-chevron-left"></i
                          ></a>
                        </li>
                        <li class="page-item active">
                          <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item">
                          <a class="page-link" href="#"
                            ><i class="bi bi-chevron-right"></i
                          ></a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>
              <div id="san-pham-detail-container" class="col-lg-6 d-none">
                <h2 class="h4 mb-4 invisible">Chi tiết</h2>
                <div class="card shadow-sm sticky-top" style="top: 1.5rem">
                  <div class="card-body p-4 position-relative">
                    <button
                      type="button"
                      class="btn-close position-absolute"
                      style="top: 1rem; right: 1rem"
                      onclick="hideSanPhamDetail()"
                    ></button>
                    <div class="text-center mb-3">
                      <img
                        src="https://placehold.co/120x120/EFEFEF/333333?text=SP"
                        class="rounded-circle border"
                        alt="Tên sản phẩm"
                        id="detail-sp-img"
                        style="width: 100px; height: 100px; object-fit: cover"
                      />
                      <h5 class="mt-3 mb-1" id="detail-sp-ten">Sản phẩm</h5>
                      <p
                        class="text-body-secondary small mb-0"
                        id="detail-sp-ma"
                      >
                        SP000
                      </p>
                    </div>
                    <hr />
                    <h6>
                      <i class="bi bi-card-text me-2 text-primary"></i>Thông số
                    </h6>
                    <p class="text-body-secondary small" id="detail-sp-mo-ta">
                      Màn hình Super Retina...
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="bom-san-pham-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4">Quản lý BOM Sản phẩm</h2>
            <div class="row g-4" style="height: calc(100vh - 160px)">
              <div class="col-lg-4 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-3">
                    <div
                      class="d-flex justify-content-between align-items-center gap-2"
                    >
                      <div class="input-group input-group-sm flex-grow-1">
                        <span class="input-group-text bg-light border-end-0"
                          ><i class="bi bi-search"></i
                        ></span>
                        <input
                          type="text"
                          class="form-control border-start-0"
                          placeholder="Tìm kiếm BOM..."
                        />
                      </div>
                      <button
                        class="btn btn-primary flex-shrink-0"
                        data-bs-toggle="modal"
                        data-bs-target="#addBomModal"
                        data-bs-toggle="tooltip"
                        title="Tạo BOM mới"
                      >
                        <i class="bi bi-plus-lg"></i>
                      </button>
                    </div>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="list-group list-group-flush">
                      <a
                        href="#"
                        class="list-group-item list-group-item-action active"
                        aria-current="true"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1">BOM - iPhone 16 Pro</h6>
                          <small>v1.0.2</small>
                        </div>
                        <p class="mb-1 small text-body-secondary">
                          BOM cho iPhone 16 Pro 256GB.
                        </p></a
                      >
                      <a href="#" class="list-group-item list-group-item-action"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1">BOM - Galaxy S25 Ultra</h6>
                          <small class="text-body-secondary">v2.1.0</small>
                        </div>
                        <p class="mb-1 small text-body-secondary">
                          BOM cho Galaxy S25 Ultra 512GB.
                        </p></a
                      >
                      <a href="#" class="list-group-item list-group-item-action"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1">BOM - Macbook Air M4</h6>
                          <small class="text-body-secondary">v1.0.0</small>
                        </div>
                        <p class="mb-1 small text-body-secondary">
                          BOM cho Macbook Air M4 13-inch.
                        </p></a
                      >
                    </div>
                  </div>
                  <div class="card-footer bg-white">
                    <nav
                      class="d-flex flex-wrap justify-content-between align-items-center"
                    >
                      <div
                        class="d-flex align-items-center text-body-secondary small"
                      >
                        Hiển thị
                        <select
                          class="form-select form-select-sm mx-2"
                          style="width: auto"
                        >
                          <option selected>10</option>
                        </select>
                      </div>
                      <ul class="pagination pagination-sm mb-0">
                        <li class="page-item disabled">
                          <a class="page-link" href="#"
                            ><i class="bi bi-chevron-left"></i
                          ></a>
                        </li>
                        <li class="page-item active">
                          <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item">
                          <a class="page-link" href="#"
                            ><i class="bi bi-chevron-right"></i
                          ></a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>
              <div class="col-lg-8 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-0 pt-3">
                    <ul
                      class="nav nav-tabs nav-tabs-bordered px-4"
                      id="bomTab"
                      role="tablist"
                    >
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link active"
                          id="info-tab"
                          data-bs-toggle="tab"
                          data-bs-target="#info-tab-pane"
                          type="button"
                        >
                          <i class="bi bi-info-circle-fill me-2"></i>Thông tin
                          chung
                        </button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link"
                          id="config-tab"
                          data-bs-toggle="tab"
                          data-bs-target="#config-tab-pane"
                          type="button"
                        >
                          <i
                            class="bi bi-wrench-adjustable-circle-fill me-2"
                          ></i
                          >Cấu hình vật tư
                        </button>
                      </li>
                    </ul>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="tab-content p-4" id="bomTabContent">
                      <div
                        class="tab-pane fade show active"
                        id="info-tab-pane"
                        role="tabpanel"
                      >
                        <div class="row g-3">
                          <div class="col-lg-8">
                            <label class="form-label">Tên sản phẩm</label
                            ><input
                              type="text"
                              class="form-control"
                              value="iPhone 16 Pro"
                              readonly
                            />
                          </div>
                          <div class="col-lg-4">
                            <label class="form-label">Người thiết kế</label
                            ><input
                              type="text"
                              class="form-control"
                              value="Admin"
                              readonly
                            />
                          </div>
                          <div class="col-12">
                            <label class="form-label">Mô tả BOM</label
                            ><textarea class="form-control" rows="2">
BOM sản xuất cho iPhone 16 Pro bản 256GB - Titan tự nhiên, áp dụng từ Q4/2025.</textarea
                            >
                          </div>
                          <div class="col-12">
                            <label class="form-label">Ghi chú</label
                            ><textarea class="form-control" rows="2">
Lưu ý kiểm tra phiên bản vi mạch XYZ trước khi lắp ráp.</textarea
                            >
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Tài liệu kỹ thuật</label>
                            <div class="card p-2 border">
                              <ul
                                class="list-group list-group-flush"
                                id="tech-doc-list"
                              >
                                <li
                                  class="list-group-item d-flex justify-content-between align-items-center py-1"
                                >
                                  <span class="small text-truncate"
                                    ><i class="bi bi-file-earmark-zip me-2"></i>
                                    ban-ve-ky-thuat-v1.zip</span
                                  ><button
                                    type="button"
                                    class="btn-close btn-sm"
                                  ></button>
                                </li>
                                <li
                                  class="list-group-item d-flex justify-content-between align-items-center py-1"
                                >
                                  <span class="small text-truncate"
                                    ><i class="bi bi-file-earmark-pdf me-2"></i>
                                    dac-ta-linh-kien.pdf</span
                                  ><button
                                    type="button"
                                    class="btn-close btn-sm"
                                  ></button>
                                </li>
                              </ul>
                              <button
                                class="btn btn-outline-secondary btn-sm mt-2"
                                onclick="document.getElementById('tech-doc-input').click()"
                              >
                                <i class="bi bi-plus-circle"></i> Thêm tệp</button
                              ><input
                                type="file"
                                id="tech-doc-input"
                                class="d-none"
                                multiple
                              />
                            </div>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Tài liệu mô tả</label>
                            <div class="card p-2 border">
                              <ul
                                class="list-group list-group-flush"
                                id="desc-doc-list"
                              >
                                <li
                                  class="list-group-item d-flex justify-content-between align-items-center py-1"
                                >
                                  <span class="small text-truncate"
                                    ><i
                                      class="bi bi-file-earmark-word me-2"
                                    ></i>
                                    huong-dan-lap-rap.docx</span
                                  ><button
                                    type="button"
                                    class="btn-close btn-sm"
                                  ></button>
                                </li>
                              </ul>
                              <button
                                class="btn btn-outline-secondary btn-sm mt-2"
                                onclick="document.getElementById('desc-doc-input').click()"
                              >
                                <i class="bi bi-plus-circle"></i> Thêm tệp</button
                              ><input
                                type="file"
                                id="desc-doc-input"
                                class="d-none"
                                multiple
                              />
                            </div>
                          </div>
                          <div class="col-12 mt-4 pt-3 border-top text-end">
                            <button
                              type="button"
                              class="btn btn-secondary me-2"
                            >
                              Hủy thay đổi</button
                            ><button type="button" class="btn btn-primary">
                              <i class="bi bi-save me-2"></i>Lưu thay đổi
                            </button>
                          </div>
                        </div>
                      </div>
                      <div
                        class="tab-pane fade"
                        id="config-tab-pane"
                        role="tabpanel"
                      >
                        <div
                          class="d-flex justify-content-between align-items-center mb-3"
                        >
                          <h5 class="mb-0 fw-bold">
                            Danh sách vật tư cấu thành
                          </h5>
                          <button
                            class="btn btn-success btn-sm"
                            data-bs-toggle="modal"
                            data-bs-target="#configBomModal"
                          >
                            <i class="bi bi-gear-fill me-2"></i>Cấu hình BOM
                          </button>
                        </div>
                        <div
                          class="table-responsive"
                          style="max-height: 40vh; overflow-y: auto"
                        >
                          <table class="table table-hover align-middle">
                            <thead class="table-light">
                              <tr>
                                <th>#</th>
                                <th>Mã VT</th>
                                <th>Tên vật tư</th>
                                <th>Số lượng</th>
                                <th>ĐVT</th>
                                <th>Ghi chú</th>
                                <th class="text-center">Hành động</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr class="table-light">
                                <td colspan="7" class="fw-bold">
                                  <i class="bi bi-tags me-2"></i>Linh kiện điện
                                  tử
                                </td>
                              </tr>
                              <tr>
                                <td>1</td>
                                <td>VT0001</td>
                                <td><strong>Vi mạch IC-XYZ</strong></td>
                                <td>
                                  <input
                                    type="number"
                                    class="form-control form-control-sm"
                                    value="1"
                                    style="width: 80px"
                                  />
                                </td>
                                <td>Cái</td>
                                <td>Linh kiện chính</td>
                                <td class="text-center">
                                  <div class="btn-group btn-group-sm">
                                    <button
                                      class="btn btn-outline-danger"
                                      title="Xóa"
                                    >
                                      <i class="bi bi-trash"></i>
                                    </button>
                                  </div>
                                </td>
                              </tr>
                              <tr class="table-light">
                                <td colspan="7" class="fw-bold">
                                  <i class="bi bi-tags me-2"></i>Vật tư cơ khí
                                </td>
                              </tr>
                              <tr>
                                <td>2</td>
                                <td>VT0002</td>
                                <td><strong>Vít M3x10</strong></td>
                                <td>
                                  <input
                                    type="number"
                                    class="form-control form-control-sm"
                                    value="8"
                                    style="width: 80px"
                                  />
                                </td>
                                <td>Cái</td>
                                <td></td>
                                <td class="text-center">
                                  <div class="btn-group btn-group-sm">
                                    <button
                                      class="btn btn-outline-danger"
                                      title="Xóa"
                                    >
                                      <i class="bi bi-trash"></i>
                                    </button>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="nhap-kho-vt-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4">Quản lý Nhập kho Vật tư</h2>
            <div class="row g-4" style="height: calc(100vh - 160px)">
              <div class="col-lg-4 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-3">
                    <div
                      class="d-flex justify-content-between align-items-center gap-2"
                    >
                      <div class="input-group input-group-sm flex-grow-1">
                        <span class="input-group-text bg-light border-end-0"
                          ><i class="bi bi-search"></i></span
                        ><input
                          type="text"
                          class="form-control border-start-0"
                          placeholder="Tìm phiếu nhập..."
                        />
                      </div>
                      <button
                        class="btn btn-primary flex-shrink-0"
                        data-bs-toggle="tooltip"
                        title="Tạo phiếu nhập"
                      >
                        <i class="bi bi-plus-lg"></i>
                      </button>
                    </div>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="list-group list-group-flush">
                      <a
                        href="#"
                        class="list-group-item list-group-item-action active"
                        aria-current="true"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1 fw-bold">PNK20250908-001</h6>
                          <small>Hôm nay</small>
                        </div>
                        <p class="mb-1 small text-body-secondary">
                          NCC: Công ty A
                        </p></a
                      ><a
                        href="#"
                        class="list-group-item list-group-item-action"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1 fw-bold">PNK20250907-005</h6>
                          <small class="text-body-secondary">Hôm qua</small>
                        </div>
                        <p class="mb-1 small text-body-secondary">
                          NCC: Nhà cung cấp B
                        </p></a
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-8 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-0 pt-3">
                    <ul
                      class="nav nav-tabs nav-tabs-bordered px-4"
                      role="tablist"
                    >
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link active"
                          data-bs-toggle="tab"
                          data-bs-target="#nk-info-pane"
                          type="button"
                        >
                          <i class="bi bi-info-circle-fill me-2"></i>Thông tin
                          chung
                        </button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link"
                          data-bs-toggle="tab"
                          data-bs-target="#nk-materials-pane"
                          type="button"
                        >
                          <i class="bi bi-list-check me-2"></i>Danh sách vật tư
                        </button>
                      </li>
                    </ul>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="tab-content p-4">
                      <div
                        class="tab-pane fade show active"
                        id="nk-info-pane"
                        role="tabpanel"
                      >
                        <h5 class="mb-3">Phiếu nhập: PNK20250908-001</h5>
                        <div class="row g-3">
                          <div class="col-md-6">
                            <label class="form-label">Nhà cung cấp</label
                            ><input
                              type="text"
                              class="form-control"
                              value="Công ty TNHH Vật tư A"
                              readonly
                            />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Người tạo</label
                            ><input
                              type="text"
                              class="form-control"
                              value="Admin"
                              readonly
                            />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Loại kho</label
                            ><select class="form-select">
                              <option selected>Kho nguyên vật liệu</option>
                              <option>Kho phụ liệu</option>
                            </select>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Hình thức nhập</label
                            ><select class="form-select">
                              <option selected>Nhập mua hàng</option>
                              <option>Nhập sản xuất</option>
                            </select>
                          </div>
                          <div class="col-12">
                            <label class="form-label">Ghi chú</label
                            ><textarea class="form-control" rows="3">
Hàng nhập theo đơn đặt hàng #PO123</textarea
                            >
                          </div>
                        </div>
                      </div>
                      <div
                        class="tab-pane fade"
                        id="nk-materials-pane"
                        role="tabpanel"
                      >
                        <div class="table-responsive">
                          <table class="table table-hover align-middle">
                            <thead class="table-light">
                              <tr>
                                <th>#</th>
                                <th>Tên vật tư</th>
                                <th>Số lô</th>
                                <th>SL</th>
                                <th>ĐVT</th>
                                <th>Đơn giá</th>
                                <th>Thành tiền</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>1</td>
                                <td>
                                  <strong>Vi mạch IC-XYZ</strong><br /><small
                                    class="text-muted"
                                    >VT0001</small
                                  >
                                </td>
                                <td>L20250908</td>
                                <td>100</td>
                                <td>Cái</td>
                                <td class="text-end">150,000</td>
                                <td class="text-end fw-bold">15,000,000</td>
                              </tr>
                              <tr>
                                <td>2</td>
                                <td>
                                  <strong>Vít M3x10</strong><br /><small
                                    class="text-muted"
                                    >VT0002</small
                                  >
                                </td>
                                <td>L20250908</td>
                                <td>500</td>
                                <td>Cái</td>
                                <td class="text-end">500</td>
                                <td class="text-end fw-bold">250,000</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="xuat-kho-vt-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4">Quản lý Xuất kho Vật tư</h2>
            <div class="row g-4" style="height: calc(100vh - 160px)">
              <div class="col-lg-4 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-3">
                    <div
                      class="d-flex justify-content-between align-items-center gap-2"
                    >
                      <div class="input-group input-group-sm flex-grow-1">
                        <span class="input-group-text bg-light border-end-0"
                          ><i class="bi bi-search"></i></span
                        ><input
                          type="text"
                          class="form-control border-start-0"
                          placeholder="Tìm phiếu xuất..."
                        />
                      </div>
                      <button
                        class="btn btn-primary flex-shrink-0"
                        data-bs-toggle="tooltip"
                        title="Tạo phiếu xuất"
                      >
                        <i class="bi bi-plus-lg"></i>
                      </button>
                    </div>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="list-group list-group-flush">
                      <a
                        href="#"
                        class="list-group-item list-group-item-action active"
                        aria-current="true"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1 fw-bold">PXK20250908-002</h6>
                          <small>Hôm nay</small>
                        </div>
                        <p class="mb-1 small text-body-secondary">
                          Lý do: Xuất cho sản xuất (LSX-00123)
                        </p></a
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-8 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-0 pt-3">
                    <ul
                      class="nav nav-tabs nav-tabs-bordered px-4"
                      role="tablist"
                    >
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link active"
                          data-bs-toggle="tab"
                          data-bs-target="#xk-info-pane"
                          type="button"
                        >
                          <i class="bi bi-info-circle-fill me-2"></i>Thông tin
                          chung
                        </button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link"
                          data-bs-toggle="tab"
                          data-bs-target="#xk-materials-pane"
                          type="button"
                        >
                          <i class="bi bi-list-check me-2"></i>Danh sách vật tư
                        </button>
                      </li>
                    </ul>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="tab-content p-4">
                      <div
                        class="tab-pane fade show active"
                        id="xk-info-pane"
                        role="tabpanel"
                      >
                        <h5 class="mb-3">Phiếu xuất: PXK20250908-002</h5>
                        <div class="row g-3">
                          <div class="col-md-6">
                            <label class="form-label">Kho xuất</label
                            ><select class="form-select">
                              <option selected>
                                Kho nguyên vật liệu chính
                              </option>
                              <option>Kho phụ</option>
                            </select>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label"
                              >Dự án / BOM sản phẩm</label
                            ><select class="form-select">
                              <option selected>
                                BOM - iPhone 16 Pro (v1.0.2)
                              </option>
                              <option>Dự án ABC</option>
                            </select>
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Người xuất</label
                            ><input
                              type="text"
                              class="form-control"
                              value="Admin"
                              readonly
                            />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Số lượng sản phẩm</label
                            ><input
                              type="number"
                              class="form-control"
                              value="50"
                            />
                          </div>
                          <div class="col-12">
                            <label class="form-label">Lý do xuất</label
                            ><select class="form-select">
                              <option selected>Xuất mới cho sản xuất</option>
                              <option>Xuất bổ sung cho sản phẩm</option>
                              <option>Xuất cho R&D</option>
                            </select>
                          </div>
                          <div class="col-12">
                            <label class="form-label">Mô tả / Ghi chú</label
                            ><textarea class="form-control" rows="3">
Xuất vật tư cho Lệnh sản xuất #LSX-00123</textarea
                            >
                          </div>
                        </div>
                      </div>
                      <div
                        class="tab-pane fade"
                        id="xk-materials-pane"
                        role="tabpanel"
                      >
                        <div class="table-responsive">
                          <table class="table table-hover align-middle">
                            <thead class="table-light">
                              <tr>
                                <th>#</th>
                                <th>Tên vật tư</th>
                                <th>Số lô</th>
                                <th>Số lượng</th>
                                <th>ĐVT</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>1</td>
                                <td>
                                  <strong>Vi mạch IC-XYZ</strong><br /><small
                                    class="text-muted"
                                    >VT0001</small
                                  >
                                </td>
                                <td>L20250908</td>
                                <td>50</td>
                                <td>Cái</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="ton-kho-vt-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4">Kho vật tư</h2>
            <div class="card shadow-sm h-100">
              <div class="card-body p-4">
                <div
                  class="d-flex flex-wrap gap-2 justify-content-between align-items-center mb-4"
                >
                  <div class="input-group" style="max-width: 400px">
                    <span class="input-group-text bg-light border-end-0"
                      ><i class="bi bi-search"></i></span
                    ><input
                      type="text"
                      id="ton-kho-search-input"
                      class="form-control border-start-0"
                      placeholder="Tìm vật tư..."
                    />
                  </div>
                  <div class="d-flex gap-2">
                    <select class="form-select" style="width: auto">
                      <option selected>Tất cả kho</option>
                      <option>Kho chính</option></select
                    ><select class="form-select" style="width: auto">
                      <option selected>Tất cả nhóm</option>
                      <option>Linh kiện điện tử</option></select
                    ><button
                      class="btn btn-primary"
                      data-bs-toggle="modal"
                      data-bs-target="#taoDeNghiModal"
                    >
                      <i class="bi bi-plus-circle me-2"></i>Tạo Phiếu Đề Nghị
                    </button>
                  </div>
                </div>
                <div class="table-responsive table-container-scrollable">
                  <table
                    id="ton-kho-table"
                    class="table table-sm table-hover align-middle"
                  >
                    <thead class="table-light">
                      <tr>
                        <th class="ps-3">Tên vật tư</th>
                        <th>Vị trí</th>
                        <th>ĐVT</th>
                        <th class="text-end">Tổng Tồn</th>
                        <th>Ngày xuất cuối</th>
                        <th>Người xuất cuối</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="table-secondary fw-bold">
                        <td colspan="6" class="ps-2">
                          Kho: Kho nguyên vật liệu chính
                        </td>
                      </tr>
                      <tr class="table-light">
                        <td colspan="6" class="ps-3 fw-semibold">
                          Nhóm vật tư: Linh kiện điện tử
                        </td>
                      </tr>
                      <tr
                        style="cursor: pointer"
                        onclick="showLotDetailModal(this)"
                        data-material-name="Vi mạch IC-XYZ"
                        data-lots='[{"lot": "L20250908", "in": 100, "out": 50, "avail": 50, "date": "08/09/2025"},{"lot": "L20250815", "in": 50, "out": 50, "avail": 0, "date": "15/08/2025"}]'
                      >
                        <td class="ps-4">
                          <strong>Vi mạch IC-XYZ</strong><br /><small
                            class="text-muted"
                            >VT0001</small
                          >
                        </td>
                        <td>Kệ A1-05</td>
                        <td>Cái</td>
                        <td class="text-end text-primary fw-bold">50</td>
                        <td>08/09/2025</td>
                        <td>Admin</td>
                      </tr>
                      <tr
                        style="cursor: pointer"
                        onclick="showLotDetailModal(this)"
                        data-material-name="Tụ điện 100uF"
                        data-lots='[{"lot": "L20250901", "in": 200, "out": 188, "avail": 12, "date": "01/09/2025"}]'
                      >
                        <td class="ps-4">
                          <strong>Tụ điện 100uF</strong><br /><small
                            class="text-muted"
                            >VT0005</small
                          >
                        </td>
                        <td>Kệ A1-06</td>
                        <td>Cái</td>
                        <td class="text-end text-danger fw-bold">12</td>
                        <td>07/09/2025</td>
                        <td>an.nguyen</td>
                      </tr>
                      <tr class="table-light">
                        <td colspan="6" class="ps-3 fw-semibold">
                          Nhóm vật tư: Vật tư cơ khí
                        </td>
                      </tr>
                      <tr
                        style="cursor: pointer"
                        onclick="showLotDetailModal(this)"
                        data-material-name="Vít M3x10"
                        data-lots='[{"lot": "L20250908", "in": 500, "out": 475, "avail": 25, "date": "08/09/2025"}]'
                      >
                        <td class="ps-4">
                          <strong>Vít M3x10</strong><br /><small
                            class="text-muted"
                            >VT0002</small
                          >
                        </td>
                        <td>Kệ B2-11</td>
                        <td>Cái</td>
                        <td class="text-end text-danger fw-bold">25</td>
                        <td>08/09/2025</td>
                        <td>Admin</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div
            id="lenh-san-xuat-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4">Quản lý Lệnh sản xuất</h2>
            <div class="row g-4" style="height: calc(100vh - 160px)">
              <div class="col-lg-4 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-3">
                    <div
                      class="d-flex justify-content-between align-items-center gap-2"
                    >
                      <div class="input-group input-group-sm flex-grow-1">
                        <span class="input-group-text bg-light border-end-0"
                          ><i class="bi bi-search"></i></span
                        ><input
                          type="text"
                          class="form-control border-start-0"
                          placeholder="Tìm lệnh sản xuất..."
                        />
                      </div>
                      <button
                        class="btn btn-primary flex-shrink-0"
                        data-bs-toggle="modal"
                        data-bs-target="#addPoModal"
                        data-bs-toggle="tooltip"
                        title="Tạo Lệnh sản xuất"
                      >
                        <i class="bi bi-plus-lg"></i>
                      </button>
                    </div>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="list-group list-group-flush">
                      <a
                        href="#"
                        class="list-group-item list-group-item-action active"
                        aria-current="true"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1 fw-bold">LSX20250908-001</h6>
                          <span class="badge bg-primary">Đang sản xuất</span>
                        </div>
                        <p class="mb-1 small">
                          Sản phẩm: iPhone 16 Pro (50 cái)
                        </p></a
                      ><a
                        href="#"
                        class="list-group-item list-group-item-action"
                        ><div class="d-flex w-100 justify-content-between">
                          <h6 class="mb-1 fw-bold">LSX20250907-003</h6>
                          <span class="badge bg-success">Hoàn thành</span>
                        </div>
                        <p class="mb-1 small text-body-secondary">
                          Sản phẩm: Macbook Air M4 (20 cái)
                        </p></a
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-8 h-100">
                <div class="card shadow-sm d-flex flex-column h-100">
                  <div class="card-header bg-white p-0 pt-3">
                    <ul
                      class="nav nav-tabs nav-tabs-bordered px-4"
                      role="tablist"
                    >
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link active"
                          data-bs-toggle="tab"
                          data-bs-target="#po-info-pane"
                          type="button"
                        >
                          <i class="bi bi-info-circle-fill me-2"></i>Thông tin
                          chung
                        </button>
                      </li>
                      <li class="nav-item" role="presentation">
                        <button
                          class="nav-link"
                          data-bs-toggle="tab"
                          data-bs-target="#po-materials-pane"
                          type="button"
                        >
                          <i class="bi bi-list-check me-2"></i>Danh sách vật tư
                        </button>
                      </li>
                    </ul>
                  </div>
                  <div
                    class="card-body p-0 flex-grow-1"
                    style="overflow-y: auto"
                  >
                    <div class="tab-content p-4">
                      <div
                        class="tab-pane fade show active"
                        id="po-info-pane"
                        role="tabpanel"
                      >
                        <h5 class="mb-3">Lệnh sản xuất: LSX20250908-001</h5>
                        <div class="row g-3">
                          <div class="col-md-6">
                            <label class="form-label">Sản phẩm</label
                            ><input
                              type="text"
                              class="form-control"
                              value="iPhone 16 Pro"
                              readonly
                            />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">BOM áp dụng</label
                            ><input
                              type="text"
                              class="form-control"
                              value="BOM - iPhone 16 Pro (v1.0.2)"
                              readonly
                            />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Số lượng sản xuất</label
                            ><input
                              type="number"
                              class="form-control"
                              value="50"
                            />
                          </div>
                          <div class="col-md-6">
                            <label class="form-label">Trạng thái</label
                            ><select class="form-select">
                              <option>Mới tạo</option>
                              <option selected>Đang sản xuất</option>
                              <option>Hoàn thành</option>
                            </select>
                          </div>
                          <div class="col-12">
                            <label class="form-label">Ghi chú</label
                            ><textarea class="form-control" rows="3"></textarea>
                          </div>
                        </div>
                      </div>
                      <div
                        class="tab-pane fade"
                        id="po-materials-pane"
                        role="tabpanel"
                      >
                        <div
                          class="d-flex justify-content-between align-items-center mb-3"
                        >
                          <h5 class="mb-0 fw-bold">Danh sách vật tư</h5>
                          <button
                            class="btn btn-primary btn-sm"
                            onclick="createStockIssueSlip()"
                          >
                            <i class="bi bi-box-arrow-up me-2"></i>Xuất kho cho
                            Lệnh sản xuất
                          </button>
                        </div>
                        <div class="table-responsive">
                          <table
                            id="po-materials-table"
                            class="table table-sm table-hover align-middle"
                          >
                            <thead class="table-light">
                              <tr>
                                <th>Tên vật tư</th>
                                <th class="text-end">SL Cần</th>
                                <th class="text-end">Tồn kho</th>
                                <th class="text-end">Bù hao (%)</th>
                                <th class="text-end">Cần Xuất</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr
                                data-name="Vi mạch IC-XYZ"
                                data-stock="50"
                                data-required="53"
                              >
                                <td>
                                  <strong>Vi mạch IC-XYZ</strong><br /><small
                                    class="text-muted"
                                    >VT0001</small
                                  >
                                </td>
                                <td class="text-end">50</td>
                                <td class="text-end">50</td>
                                <td class="text-end">
                                  <input
                                    type="number"
                                    class="form-control form-control-sm d-inline-block"
                                    value="5"
                                    style="width: 70px"
                                  />
                                </td>
                                <td class="text-end fw-bold text-danger">53</td>
                              </tr>
                              <tr
                                data-name="Vít M3x10"
                                data-stock="25"
                                data-required="420"
                              >
                                <td>
                                  <strong>Vít M3x10</strong><br /><small
                                    class="text-muted"
                                    >VT0002</small
                                  >
                                </td>
                                <td class="text-end">400</td>
                                <td class="text-end text-danger">25</td>
                                <td class="text-end">
                                  <input
                                    type="number"
                                    class="form-control form-control-sm d-inline-block"
                                    value="5"
                                    style="width: 70px"
                                  />
                                </td>
                                <td class="text-end fw-bold text-danger">
                                  420
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            id="placeholder-content"
            class="page-content-section"
            style="display: none"
          >
            <h2 class="h4 mb-4" id="placeholder-title">Chức năng</h2>
            <div class="card border-0 shadow-sm rounded-4">
              <div class="card-body p-5 text-center text-body-secondary">
                <i class="bi bi-gear-wide-connected fs-1 mb-3"></i>
                <p class="h5">Chức năng đang được xây dựng</p>
                <p>
                  Nội dung cho màn hình
                  <strong id="placeholder-text">này</strong> sẽ được hiển thị
                  tại đây.
                </p>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div
        id="liveToast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header">
          <i class="bi bi-check-circle-fill rounded me-2 text-success"></i>
          <strong class="me-auto">Thông báo</strong>
          <small>Vừa xong</small>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body">
          <!-- Toast message goes here -->
        </div>
      </div>
    </div>

    <!-- Add BOM Modal -->
    <div
      class="modal fade"
      id="addBomModal"
      tabindex="-1"
      aria-labelledby="addBomModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="addBomModalLabel">
              <i class="bi bi-plus-circle me-2"></i>Tạo BOM sản phẩm mới
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="row g-3">
                <div class="col-md-8">
                  <label class="form-label">Sản phẩm</label
                  ><select class="form-select">
                    <option selected disabled value="">Chọn sản phẩm...</option>
                    <option>iPhone 16 Pro</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Phiên bản BOM</label
                  ><input
                    type="text"
                    class="form-control"
                    placeholder="v1.0.0"
                  />
                </div>
                <div class="col-12">
                  <label class="form-label">Mô tả</label
                  ><textarea
                    class="form-control"
                    rows="3"
                    placeholder="Mô tả ngắn..."
                  ></textarea>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Hủy</button
            ><button type="button" class="btn btn-primary">
              Lưu và tiếp tục
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Configure BOM Modal -->
    <div
      class="modal fade"
      id="configBomModal"
      tabindex="-1"
      aria-labelledby="configBomModalLabel"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="configBomModalLabel">
              <i class="bi bi-gear-fill me-2"></i>Cấu hình BOM cho: iPhone 16
              Pro
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div class="row g-3">
              <div class="col-md-6">
                <div class="card h-100">
                  <div class="card-header">
                    <div class="input-group">
                      <span class="input-group-text bg-light border-end-0"
                        ><i class="bi bi-search"></i></span
                      ><input
                        type="text"
                        class="form-control border-start-0"
                        placeholder="Tìm vật tư có sẵn..."
                      />
                    </div>
                  </div>
                  <div class="card-body p-0">
                    <div
                      class="list-group list-group-flush"
                      style="height: 50vh; overflow-y: auto"
                    >
                      <div
                        class="list-group-item d-flex justify-content-between align-items-center"
                      >
                        <div>
                          <strong>Thùng Carton 3 lớp</strong
                          ><small class="d-block text-muted">VT0003</small>
                        </div>
                        <button
                          class="btn btn-sm btn-outline-primary"
                          title="Thêm vào BOM"
                        >
                          <i class="bi bi-chevron-right"></i>
                        </button>
                      </div>
                      <div
                        class="list-group-item d-flex justify-content-between align-items-center"
                      >
                        <div>
                          <strong>Vỏ nhựa ABS Model A</strong
                          ><small class="d-block text-muted">VT0004</small>
                        </div>
                        <button
                          class="btn btn-sm btn-outline-primary"
                          title="Thêm vào BOM"
                        >
                          <i class="bi bi-chevron-right"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card h-100">
                  <div class="card-header fw-bold">Vật tư trong BOM</div>
                  <div class="card-body p-0">
                    <div
                      class="table-responsive"
                      style="height: 50vh; overflow-y: auto"
                    >
                      <table class="table table-sm table-striped">
                        <thead class="table-light position-sticky top-0">
                          <tr>
                            <th>Tên vật tư</th>
                            <th style="width: 25%">Số lượng</th>
                            <th style="width: 15%"></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr class="table-light">
                            <td colspan="3" class="fw-bold">
                              <i class="bi bi-tags me-2"></i>Linh kiện điện tử
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <strong>Vi mạch IC-XYZ</strong
                              ><small class="d-block text-muted">VT0001</small>
                            </td>
                            <td>
                              <input
                                type="number"
                                class="form-control form-control-sm"
                                value="1"
                              />
                            </td>
                            <td class="text-center">
                              <button
                                class="btn btn-sm btn-outline-danger"
                                title="Xóa khỏi BOM"
                              >
                                <i class="bi bi-x-lg"></i>
                              </button>
                            </td>
                          </tr>
                          <tr class="table-light">
                            <td colspan="3" class="fw-bold">
                              <i class="bi bi-tags me-2"></i>Vật tư cơ khí
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <strong>Vít M3x10</strong
                              ><small class="d-block text-muted">VT0002</small>
                            </td>
                            <td>
                              <input
                                type="number"
                                class="form-control form-control-sm"
                                value="8"
                              />
                            </td>
                            <td class="text-center">
                              <button
                                class="btn btn-sm btn-outline-danger"
                                title="Xóa khỏi BOM"
                              >
                                <i class="bi bi-x-lg"></i>
                              </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Hủy</button
            ><button type="button" class="btn btn-primary">
              <i class="bi bi-save me-2"></i>Lưu cấu hình
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Production Order Modal -->
    <div
      class="modal fade"
      id="addPoModal"
      tabindex="-1"
      aria-labelledby="addPoModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="addPoModalLabel">
              <i class="bi bi-plus-circle me-2"></i>Tạo Lệnh sản xuất mới
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="row g-3">
                <div class="col-md-8">
                  <label class="form-label">Sản phẩm</label
                  ><select class="form-select" id="po-product-select">
                    <option selected disabled value="">Chọn sản phẩm...</option>
                    <option value="has_bom">iPhone 16 Pro</option>
                    <option value="no_bom">Sản phẩm Y (chưa có BOM)</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label class="form-label">Số lượng</label
                  ><input type="number" class="form-control" placeholder="0" />
                </div>
                <div id="bom-info-alert" class="col-12 d-none">
                  <div
                    class="alert alert-warning d-flex align-items-center small"
                    role="alert"
                  >
                    <i class="bi bi-exclamation-triangle-fill me-3"></i>
                    <div>
                      Sản phẩm này chưa có BOM định mức. Vui lòng tạo BOM trước
                      khi tạo lệnh sản xuất.<a
                        href="#"
                        onclick="showContent('bom-san-pham-content', document.querySelector('[onclick*=\'bom-san-pham\']'))"
                        class="ms-2 fw-bold"
                        >Tạo BOM ngay</a
                      >
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Hủy</button
            ><button type="button" class="btn btn-primary">Tạo lệnh</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      let lotDetailModal, liveToast;

      function showContent(contentId, element, title = "") {
        // Hide all main content sections
        document
          .querySelectorAll(".page-content-section")
          .forEach((section) => {
            section.style.display = "none";
          });

        const activeContent = document.getElementById(contentId);
        if (activeContent) {
          activeContent.style.display = "block";
          // Special handling for placeholder to set its title
          if (contentId === "placeholder-content" && title) {
            document.getElementById("placeholder-title").innerText = title;
            document.getElementById("placeholder-text").innerText = title;
          }
        }

        // Manage active classes
        document.querySelectorAll(".sidebar .nav-link").forEach((link) => {
          link.classList.remove("active", "active-parent");
        });
        element.classList.add("active");
        const parentCollapse = element.closest(".collapse");
        if (parentCollapse) {
          const parentTrigger = document.querySelector(
            `[data-bs-target="#${parentCollapse.id}"]`
          );
          if (parentTrigger) parentTrigger.classList.add("active-parent");
        }

        // Reset any detail views
        hideVatTuDetail();
        hideSanPhamDetail();

        // On mobile, hide the sidebar
        if (window.innerWidth < 992) {
          toggleSidebar();
        }
      }

      function toggleSidebar() {
        document.getElementById("sidebarMenu").classList.toggle("show");
      }
      document
        .querySelector(".sidebar-overlay")
        .addEventListener("click", toggleSidebar);

      function showVatTuDetail(rowElement) {
        if (rowElement.classList.contains("table-light")) return;
        document
          .querySelectorAll("#vat-tu-table tbody tr")
          .forEach((row) => row.classList.remove("table-active"));
        rowElement.classList.add("table-active");
        document.getElementById("edit-vat-tu-btn").disabled = false;
        document.getElementById("delete-vat-tu-btn").disabled = false;
        document.getElementById("vat-tu-table-container").className =
          "col-lg-6";
        document
          .getElementById("vat-tu-detail-container")
          .classList.remove("d-none");
        document.getElementById("detail-ten-vat-tu").innerText =
          rowElement.querySelector("strong").innerText;
        document.getElementById("detail-ma-vat-tu").innerText =
          rowElement.querySelector("p").innerText;
        document.getElementById("detail-img").src = rowElement.dataset.imgSrc;
      }

      function hideVatTuDetail() {
        const tableContainer = document.getElementById(
          "vat-tu-table-container"
        );
        if (tableContainer) {
          tableContainer.className = "col-12";
          document
            .getElementById("vat-tu-detail-container")
            .classList.add("d-none");
          document
            .querySelectorAll("#vat-tu-table tbody tr")
            .forEach((row) => row.classList.remove("table-active"));
          document.getElementById("edit-vat-tu-btn").disabled = true;
          document.getElementById("delete-vat-tu-btn").disabled = true;
        }
      }

      function showSanPhamDetail(rowElement) {
        if (rowElement.classList.contains("table-light")) return;
        document
          .querySelectorAll("#san-pham-table tbody tr")
          .forEach((row) => row.classList.remove("table-active"));
        rowElement.classList.add("table-active");
        document.getElementById("edit-san-pham-btn").disabled = false;
        document.getElementById("delete-san-pham-btn").disabled = false;
        document.getElementById("san-pham-table-container").className =
          "col-lg-6";
        document
          .getElementById("san-pham-detail-container")
          .classList.remove("d-none");
        document.getElementById("detail-sp-ten").innerText =
          rowElement.querySelector("strong").innerText;
        document.getElementById("detail-sp-ma").innerText =
          rowElement.querySelector("p").innerText;
        document.getElementById("detail-sp-img").src =
          rowElement.dataset.imgSrc;
      }

      function hideSanPhamDetail() {
        const tableContainer = document.getElementById(
          "san-pham-table-container"
        );
        if (tableContainer) {
          tableContainer.className = "col-12";
          document
            .getElementById("san-pham-detail-container")
            .classList.add("d-none");
          document
            .querySelectorAll("#san-pham-table tbody tr")
            .forEach((row) => row.classList.remove("table-active"));
          document.getElementById("edit-san-pham-btn").disabled = true;
          document.getElementById("delete-san-pham-btn").disabled = true;
        }
      }

      function showLotDetailModal(rowElement) {
        const materialName = rowElement.dataset.materialName;
        const lotsData = JSON.parse(rowElement.dataset.lots);

        const modalTitle = document.getElementById("lotDetailModalLabel");
        const modalBody = document.getElementById("lotDetailTableBody");

        modalTitle.innerText = `Chi tiết theo lô: ${materialName}`;

        modalBody.innerHTML = "";

        if (lotsData && lotsData.length > 0) {
          lotsData.forEach((lot) => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                        <td>${lot.lot}</td>
                        <td class="text-end">${lot.in}</td>
                        <td class="text-end">${lot.out}</td>
                        <td class="text-end fw-bold">${lot.avail}</td>
                        <td>${lot.date}</td>
                    `;
            modalBody.appendChild(tr);
          });
        } else {
          modalBody.innerHTML =
            '<tr><td colspan="5" class="text-center">Không có dữ liệu chi tiết lô cho vật tư này.</td></tr>';
        }
        lotDetailModal.show();
      }

      function showToast(message, isError = false) {
        const toastBody = document.querySelector("#liveToast .toast-body");
        const toastIcon = document.querySelector("#liveToast .toast-header i");
        toastBody.textContent = message;

        if (isError) {
          toastIcon.className =
            "bi bi-exclamation-triangle-fill rounded me-2 text-danger";
        } else {
          toastIcon.className =
            "bi bi-check-circle-fill rounded me-2 text-success";
        }

        if (liveToast) {
          liveToast.show();
        }
      }

      function createStockIssueSlip() {
        const materialRows = document.querySelectorAll(
          "#po-materials-table tbody tr"
        );
        const materialsToIssue = [];
        const materialsShortage = [];

        materialRows.forEach((row) => {
          if (row.classList.contains("table-light")) return;

          const stock = parseInt(row.dataset.stock, 10);
          const required = parseInt(row.dataset.required, 10);
          const name = row.dataset.name;

          if (stock >= required) {
            materialsToIssue.push(name);
          } else {
            materialsShortage.push(name);
          }
        });

        if (materialsToIssue.length > 0 && materialsShortage.length > 0) {
          showToast(
            `Đã tạo phiếu xuất cho: ${materialsToIssue.join(
              ", "
            )}. Không đủ tồn kho cho: ${materialsShortage.join(", ")}.`,
            true
          );
        } else if (materialsToIssue.length > 0) {
          showToast(
            `Đã tạo phiếu xuất thành công cho ${materialsToIssue.length} vật tư.`
          );
        } else if (materialsShortage.length > 0) {
          showToast(
            `Không thể tạo phiếu xuất. Không đủ tồn kho cho: ${materialsShortage.join(
              ", "
            )}.`,
            true
          );
        } else {
          showToast("Không có vật tư nào trong lệnh sản xuất.", true);
        }
      }

      function removeVietnameseTones(str) {
        if (!str) return "";
        return str
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "")
          .replace(/đ/g, "d")
          .replace(/Đ/g, "D");
      }

      function setupTableSearch(inputId, tableId) {
        const searchInput = document.getElementById(inputId);
        const table = document.getElementById(tableId);
        if (!searchInput || !table) return;

        const searchLogic = () => {
          const filter = removeVietnameseTones(searchInput.value.toLowerCase());
          const allRows = table.querySelectorAll("tbody tr");

          if (table.querySelector("tr.table-light")) {
            // Grouped
            let currentGroupHeader = null;
            let groupHasVisibleRows = false;
            for (const row of allRows) {
              if (
                row.classList.contains("table-light") ||
                row.classList.contains("table-secondary")
              ) {
                if (currentGroupHeader)
                  currentGroupHeader.style.display = groupHasVisibleRows
                    ? ""
                    : "none";
                currentGroupHeader = row;
                groupHasVisibleRows = false;
              } else {
                let rowText = removeVietnameseTones(
                  (row.textContent || row.innerText).toLowerCase()
                );
                const isVisible = rowText.includes(filter);
                row.style.display = isVisible ? "" : "none";
                if (isVisible) groupHasVisibleRows = true;
              }
            }
            if (currentGroupHeader)
              currentGroupHeader.style.display = groupHasVisibleRows
                ? ""
                : "none";
          } else {
            // Standard
            for (let row of allRows) {
            }
          }
        };
      }
    </script>
  </body>
</html>
