<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Báo cáo ca làm việc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-light">

<div class="container py-3">

  <!-- Tiêu đề -->
  <h5 class="mb-3">Báo cáo ca làm việc</h5>

  <!-- Thông tin nhân viên -->
  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <p class="mb-1"><strong>Nhân viên bàn giao:</strong><br>Nguyễn Văn A</p>
      <p class="mb-0"><strong>Nhân viên nhận bàn giao:</strong><br>Trần Thị B</p>
    </div>
  </div>

  <!-- Các thống kê -->
  <div class="row g-2">

    <div class="col-6">
      <div class="card text-center shadow-sm stat-card" data-type="donNhan">
        <div class="card-body py-3">
          <small class="text-muted">Đơn nhận</small>
          <h5 class="fw-bold text-primary mb-0">25</h5>
        </div>
      </div>
    </div>

    <div class="col-6">
      <div class="card text-center shadow-sm stat-card" data-type="daGiat">
        <div class="card-body py-3">
          <small class="text-muted">Đã giặt</small>
          <h5 class="fw-bold text-success mb-0">18</h5>
        </div>
      </div>
    </div>

    <div class="col-6">
      <div class="card text-center shadow-sm stat-card" data-type="hoanThanh">
        <div class="card-body py-3">
          <small class="text-muted">Hoàn thành giao</small>
          <h5 class="fw-bold text-success mb-0">15</h5>
        </div>
      </div>
    </div>

    <div class="col-6">
      <div class="card text-center shadow-sm stat-card" data-type="new">
        <div class="card-body py-3">
          <small class="text-muted">Chưa giặt</small>
          <h5 class="fw-bold text-danger mb-0">7</h5>
        </div>
      </div>
    </div>

    <div class="col-12">
      <div class="card text-center shadow-sm bg-light border-primary">
        <div class="card-body py-3">
          <small class="text-muted">Tổng tiền thu</small>
          <h4 class="fw-bold text-primary mb-0">12,500,000 đ</h4>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Modal Dùng Chung -->
<div class="modal fade" id="detailModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title" id="modalTitle">Chi tiết</h6>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div id="orderList">
          <!-- Card đơn hàng sẽ render ở đây -->
        </div>
      </div>
    </div>
  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Data demo
  var orders = JSON.parse(localStorage.getItem("ListAll")) || [];

  // Sự kiện click
  // Sự kiện click
$(".stat-card").on("click", function(){
  let type = $(this).data("type"); // new, done, washing...

  $("#modalTitle").text("Chi tiết đơn " + (type === "new" ? "chưa giặt" : ""));

  $("#orderList").empty();

  // lọc theo status
  let filtered = orders.filter(o => o.status === "NEW");

  filtered.forEach(o => {
    let itemHtml = o.items.map(i => `
      <li class="list-group-item d-flex justify-content-between">
        <span>${i.type} x${i.qty} (${i.weight} kg)</span>
        <span>${i.amount.toLocaleString()} đ</span>
      </li>
    `).join("");

    $("#orderList").append(`
      <div class="card mb-2 shadow-sm border-0 rounded-3">
        <div class="card-body p-3">
          <div class="d-flex justify-content-between align-items-center mb-1">
            <div>
              <div class="fw-bold">${o.createdAt}</div>
              <small class="text-muted">${o.status}</small>
            </div>
            <div class="fw-bold text-primary">${o.totalAmount.toLocaleString()} đ</div>
          </div>
          <div><strong>Khách:</strong> ${o.customerName}</div>
          <div><strong>Địa chỉ:</strong> ${o.address}</div>
          <div><strong>Điện thoại:</strong> ${o.phone}</div>
          <hr class="my-2">
          <ul class="list-group list-group-flush">
            ${itemHtml}
          </ul>
        </div>
      </div>
    `);
  });

  new bootstrap.Modal(document.getElementById('detailModal')).show();
});

</script>

</body>
</html>
